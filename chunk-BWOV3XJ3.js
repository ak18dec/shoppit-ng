import{$ as m,Da as l,a as s,b as r,nc as o}from"./chunk-L5DIGKCM.js";var c=class n{itemsSignal=l([]);items=this.itemsSignal.asReadonly();totalItems=o(()=>this.itemsSignal().reduce((t,i)=>t+i.quantity,0));totalPrice=o(()=>this.itemsSignal().reduce((t,i)=>t+i.price*i.quantity,0));constructor(){this.loadCart()}loadCart(){let t=localStorage.getItem("cart");t&&this.itemsSignal.set(JSON.parse(t))}saveCart(){localStorage.setItem("cart",JSON.stringify(this.itemsSignal()))}addToCart(t){let i=this.itemsSignal();i.find(a=>a.id===t.id)?this.itemsSignal.set(i.map(a=>a.id===t.id?r(s({},a),{quantity:a.quantity+1}):a)):this.itemsSignal.set([...i,r(s({},t),{quantity:1})]),this.saveCart()}removeFromCart(t){this.itemsSignal.set(this.itemsSignal().filter(i=>i.id!==t)),this.saveCart()}updateQuantity(t,i){if(i<=0){this.removeFromCart(t);return}this.itemsSignal.set(this.itemsSignal().map(e=>e.id===t?r(s({},e),{quantity:i}):e)),this.saveCart()}clearCart(){this.itemsSignal.set([]),this.saveCart()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=m({token:n,factory:n.\u0275fac,providedIn:"root"})};export{c as a};
