import{$ as g,Da as o,a,b as l,d as n}from"./chunk-ANFVJUA5.js";var u=class i{userSignal=o(null);loadingSignal=o(!0);user=this.userSignal.asReadonly();loading=this.loadingSignal.asReadonly();constructor(){this.checkStoredUser()}checkStoredUser(){let t=localStorage.getItem("user");t&&this.userSignal.set(JSON.parse(t)),this.loadingSignal.set(!1)}login(t,r){return n(this,null,function*(){if(yield new Promise(e=>setTimeout(e,1e3)),t&&r){let e={id:Math.random().toString(36).substr(2,9),email:t,name:t.split("@")[0]};return this.userSignal.set(e),localStorage.setItem("user",JSON.stringify(e)),!0}return!1})}signup(t,r,e){return n(this,null,function*(){if(yield new Promise(s=>setTimeout(s,1e3)),t&&r&&e){let s={id:Math.random().toString(36).substr(2,9),email:t,name:e};return this.userSignal.set(s),localStorage.setItem("user",JSON.stringify(s)),!0}return!1})}logout(){this.userSignal.set(null),localStorage.removeItem("user")}updateProfile(t,r){let e=this.userSignal();if(e){let s=l(a({},e),{name:t,email:r});this.userSignal.set(s),localStorage.setItem("user",JSON.stringify(s))}}static \u0275fac=function(r){return new(r||i)};static \u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})};export{u as a};
